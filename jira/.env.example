# Jira Docker Configuration

# Docker Compose Project Name
COMPOSE_PROJECT_NAME=jira-server

# ========================================
# Jira Settings
# ========================================
# Container settings
JIRA_CONTAINER_NAME=jira_server
JIRA_HOSTNAME=docker_jira_server
JIRA_RESTART_POLICY=unless-stopped

# Jira version
# LTS versions: 10.3 (EOL: Dec 2026), 9.12 (EOL: Nov 2025)
# Check latest: https://hub.docker.com/r/atlassian/jira-software/tags
JIRA_VERSION=10.3.16

# Port mapping (22400-22409)
JIRA_PORT=22400
JIRA_INTERNAL_PORT=8080

# Data path
JIRA_DATA_PATH=/var/atlassian/application-data/jira

# Log path
JIRA_LOG_HOST_PATH=./logs/jira
JIRA_LOG_PATH=/var/atlassian/application-data/jira/log

# JVM Memory Settings
JVM_MINIMUM_MEMORY=1024m
JVM_MAXIMUM_MEMORY=2048m
JVM_SUPPORT_RECOMMENDED_ARGS=-Datlassian.plugins.enable.wait=300

# Resource limits
JIRA_CPU_LIMIT=4.0
JIRA_MEMORY_LIMIT=4G
JIRA_CPU_RESERVATION=1.0
JIRA_MEMORY_RESERVATION=2G

# Health check settings
JIRA_HEALTHCHECK_HOST=localhost
JIRA_HEALTHCHECK_ENDPOINT=/status
JIRA_HEALTHCHECK_INTERVAL=30s
JIRA_HEALTHCHECK_TIMEOUT=10s
JIRA_HEALTHCHECK_RETRIES=5
JIRA_HEALTHCHECK_START_PERIOD=120s

# Logging settings
JIRA_LOG_DRIVER=json-file
JIRA_LOG_MAX_SIZE=50m
JIRA_LOG_MAX_FILE=5

# Database driver settings
ATL_DB_DRIVER=org.postgresql.Driver
ATL_DB_TYPE=postgres72

# Proxy Settings (if behind reverse proxy)
ATL_PROXY_NAME=
ATL_PROXY_PORT=
ATL_TOMCAT_SCHEME=http
ATL_TOMCAT_SECURE=false

# ========================================
# PostgreSQL Settings
# ========================================
# Container settings
POSTGRES_CONTAINER_NAME=jira_postgres
POSTGRES_HOSTNAME=docker_jira_postgres
POSTGRES_RESTART_POLICY=unless-stopped

# PostgreSQL version
# Check latest: https://hub.docker.com/_/postgres/tags
POSTGRES_VERSION=18-alpine

# Database credentials (CHANGE THESE IN PRODUCTION!)
POSTGRES_USER=jira
POSTGRES_PASSWORD=jira_password_change_me
POSTGRES_DB=jiradb

# Port mapping (22400-22409)
POSTGRES_PORT=22401
POSTGRES_INTERNAL_PORT=5432

# Data paths
POSTGRES_DATA_PATH=/var/lib/postgresql/data
POSTGRES_TMP_PATH=/tmp
POSTGRES_RUN_PATH=/var/run/postgresql
POSTGRES_LOG_HOST_PATH=./logs/postgres
POSTGRES_LOG_PATH=/var/log/postgresql

# Config file paths
POSTGRES_CONFIG_HOST_PATH=./config/postgresql.conf
POSTGRES_CONFIG_PATH=/etc/postgresql/postgresql.conf

# Init scripts paths
POSTGRES_INIT_SCRIPTS_HOST_PATH=./init
POSTGRES_INIT_SCRIPTS_CONTAINER_PATH=/docker-entrypoint-initdb.d

# PostgreSQL init args
POSTGRES_INITDB_ARGS=--encoding=UTF-8 --locale=C

# Shared memory size
POSTGRES_SHM_SIZE=256mb

# Resource limits
POSTGRES_CPU_LIMIT=2.0
POSTGRES_MEMORY_LIMIT=2G
POSTGRES_CPU_RESERVATION=0.5
POSTGRES_MEMORY_RESERVATION=512M

# Health check settings
POSTGRES_HEALTHCHECK_INTERVAL=10s
POSTGRES_HEALTHCHECK_TIMEOUT=5s
POSTGRES_HEALTHCHECK_RETRIES=5
POSTGRES_HEALTHCHECK_START_PERIOD=30s

# Logging settings
POSTGRES_LOG_DRIVER=json-file
POSTGRES_LOG_MAX_SIZE=10m
POSTGRES_LOG_MAX_FILE=3

# ========================================
# Volume Settings
# ========================================
VOLUME_DRIVER=local
VOLUME_TMPFS_TYPE=tmpfs
VOLUME_TMPFS_DEVICE=tmpfs

# ========================================
# Network Settings
# ========================================
# Network name (shared across containers)
NETWORK_NAME=jira.internal

# Network driver
NETWORK_DRIVER=bridge

# IPAM settings
NETWORK_IPAM_DRIVER=default
NETWORK_SUBNET=10.224.0.0/16
NETWORK_GATEWAY=10.224.0.1

# ========================================
# Linux/System Settings
# ========================================
# Timezone
TZ=Asia/Tokyo

# Locale settings
LANG=ja_JP.UTF-8
LC_ALL=ja_JP.UTF-8
LANGUAGE=ja_JP:ja

# Character encoding
LC_CTYPE=ja_JP.UTF-8
LC_COLLATE=ja_JP.UTF-8
